<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Root Finder </title>
</head>
<body>
    <h1>Root Finder (by me)</h1>
    
    <form id="rootForm">
        <label for="expression">Enter an expression:</label><br>
        <input type="text" id="expression" placeholder="e.g., x**3 - x" required><br><br>

        <label for="username">Username:</label><br>
        <input type="text" id="username" required><br><br>

        <label for="password">Password:</label><br>
        <input type="password" id="password" required><br><br>

        <button type="submit">Find Roots</button>
    </form>

    <hr>
    <div id="result"></div>

    <script>
        document.getElementById('rootForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const expr = document.getElementById('expression').value.trim();
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            if (!expr || !username || !password) {
                alert("All fields are required!");
                return;
            }

            const credentials = btoa(username + ':' + password);

            try {
                const response = await fetch(`/solve?expression=${encodeURIComponent(expr)}`, {
                    headers: {
                        'Authorization': 'Basic ' + credentials
                    }
                });

                if (response.status === 401) {
                    document.getElementById('result').innerText = '❌ Unauthorized. Please check your credentials.';
                } else if (response.ok) {
                    const html = await response.text();
                    document.getElementById('result').innerHTML = html;
                } else {
                    document.getElementById('result').innerText = `❌ Error: ${response.status}`;
                }
            } catch (err) {
                console.error(err);
                document.getElementById('result').innerText = '❌ Network error or server is unavailable.';
            }
        });
    </script>
</body>
</html>
