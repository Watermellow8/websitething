<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Root Finder</title>
</head>
<body>
    <h1>Root Finder (by me)</h1>

    <p>Welcome, {{ username }} â€” go do math!</p>

    <form action="/solve" method="GET">
        <label for="expression">Enter an expression:</label><br>
        <input type="text" name="expression" id="expression" placeholder="e.g., x**3 - x" required><br><br>
        <button type="submit">Find Roots</button>
    </form>

    <hr>

    {% if can_create_users %}
    <h2>Create New User (solve-only)</h2>
    <form action="/create-user" method="POST">
        <label for="username">Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label for="password">Password:</label><br>
        <input type="password" name="password" required><br><br>

        <input type="hidden" name="permissions" value="solve_function">

        <button type="submit">Create User</button>
    </form>
    <hr>
    {% endif %}

    {% if can_create_mods %}
    <h2>Create New Mod (limited permissions)</h2>
    <form action="/create-mod" method="POST">
        <label for="username">Mod Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label for="password">Mod Password:</label><br>
        <input type="password" name="password" required><br><br>

        <label>Assign Permissions:</label><br>
        <label><input type="checkbox" name="permissions" value="solve_function"> Solve Function</label><br>
        <label><input type="checkbox" name="permissions" value="trigger_error"> Trigger Error</label><br>
        <label><input type="checkbox" name="permissions" value="create_user"> Create Users</label><br><br>

        <button type="submit">Create Mod</button>
    </form>
    <hr>
    {% endif %}

    {% if can_create_admins %}
    <h2>Create New Admin (flexible permissions)</h2>
    <form action="/create-admin" method="POST">
        <label for="username">Admin Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label for="password">Admin Password:</label><br>
        <input type="password" name="password" required><br><br>

        <label>Assign Permissions:</label><br>
        <label><input type="checkbox" name="permissions" value="solve_function"> Solve Function</label><br>
        <label><input type="checkbox" name="permissions" value="trigger_error"> Trigger Error</label><br>
        <label><input type="checkbox" name="permissions" value="create_user"> Create Users</label><br>
        <label><input type="checkbox" name="permissions" value="create_mod"> Create Mod</label><br><br>

        <button type="submit">Create Admin</button>
    </form>
    <hr>
    {% endif %}

    <a href="/debug-sentry">Trigger Sentry Test Error</a>
</body>
</html>
